"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[84],{3084:(Ge,h,s)=>{s.r(h),s.d(h,{DashboardModule:()=>Ke});var c=s(9808),u=s(3075),v=s(464),O=s(1874),x=s(4851),y=s(845),L=s(3986),e=s(5e3),d=s(9989),m=s(4119);let ve=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[c.ez,d.Bz,m.z,d.Bz,m.z]}),n})();var S=s(5861),E=s(520),xe=s(2132),ye=s(322),Ce=s(209),p=s(9019),be=s(8568),g=s(9783),Te=s(8874),I=s(7773),k=s(9748),D=s(9142),P=s(1424),A=s(5315),Z=s(4534),w=s(3407),U=s(7010);const Me=["dt1"];function Se(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",31)(1,"button",32),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.showCreate())}),e.qZA()()}}function Ee(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",33)(1,"span",34),e._UZ(2,"i",35),e.TgZ(3,"input",36),e.NdJ("input",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.applyFilterGlobal(o,"contains"))}),e.qZA()()()}}function Ie(n,a){1&n&&(e.TgZ(0,"tr")(1,"th")(2,"div"),e._uU(3," M\xe3 giao d\u1ecbch "),e.qZA()(),e.TgZ(4,"th")(5,"div"),e._uU(6," S\u1ed1 ti\u1ec1n "),e.qZA()(),e.TgZ(7,"th")(8,"div"),e._uU(9," N\u1ed9i dung "),e.qZA()(),e.TgZ(10,"th")(11,"div"),e._uU(12," Th\u1eddi gian "),e.qZA()(),e.TgZ(13,"th")(14,"div"),e._uU(15," Ng\u01b0\u1eddi t\u1ea1o "),e.qZA()(),e.TgZ(16,"th")(17,"div"),e._uU(18," Lo\u1ea1i giao d\u1ecbch "),e.qZA()(),e.TgZ(19,"th")(20,"div"),e._uU(21," Tr\u1ea1ng th\xe1i "),e.qZA()()())}function ke(n,a){1&n&&e._UZ(0,"p-tag",41)}function De(n,a){1&n&&e._UZ(0,"p-tag",42)}function Pe(n,a){1&n&&e._UZ(0,"p-tag",43)}function Ae(n,a){1&n&&e._UZ(0,"p-tag",44)}const _=function(){return{minimumFractionDigits:0}};function Ze(n,a){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e.YNc(12,ke,1,0,"p-tag",37),e.YNc(13,De,1,0,"p-tag",38),e.qZA(),e.TgZ(14,"td"),e.YNc(15,Pe,1,0,"p-tag",39),e.YNc(16,Ae,1,0,"p-tag",40),e.qZA()()),2&n){const t=a.$implicit;e.Tol(t.hightlightClass),e.xp6(2),e.Oqu(t.code),e.xp6(2),e.hij("",t.totalMoney.toLocaleString("en-us",e.DdM(11,_))," \u0111\u1ed3ng"),e.xp6(2),e.Oqu(t.content),e.xp6(2),e.hij(" ",t.timeCreated,""),e.xp6(2),e.Oqu(t.createdBy),e.xp6(2),e.Q6J("ngIf","in"==t.type),e.xp6(1),e.Q6J("ngIf","out"==t.type),e.xp6(2),e.Q6J("ngIf","confimred"==t.status),e.xp6(1),e.Q6J("ngIf","unconfimred"==t.status)}}function we(n,a){1&n&&(e.TgZ(0,"tr")(1,"td",45),e._uU(2,"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u"),e.qZA()())}function Ue(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",0)(1,"div",46),e._uU(2," Th\xf4ng tin giao d\u1ecbch"),e.qZA(),e.TgZ(3,"div",47)(4,"label",48),e._uU(5,"Lo\u1ea1i giao d\u1ecbch"),e.qZA(),e.TgZ(6,"p-dropdown",49),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.transaction.type=o)}),e.qZA()(),e.TgZ(7,"div",47)(8,"label",50),e._uU(9,"T\u1ed5ng ti\u1ec1n "),e.qZA(),e.TgZ(10,"p-inputNumber",51),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.transaction.totalMoney=o)}),e.qZA()(),e.TgZ(11,"div",52)(12,"label",53),e._uU(13,"N\u1ed9i dung giao d\u1ecbch"),e.qZA(),e.TgZ(14,"textarea",54),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.transaction.content=o)}),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(6),e.Q6J("options",t.listStatus)("ngModel",t.transaction.type),e.xp6(4),e.Q6J("ngModel",t.transaction.totalMoney),e.xp6(4),e.Q6J("ngModel",t.transaction.content)}}function Oe(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",55),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.create())}),e.qZA()}}const f=function(){return{width:"2.5rem",height:"2.5rem"}},Le=function(){return["id","code","content","status","timeCreated","type","createdBy"]},Fe=function(){return[10,20,30]},Be=function(){return{width:"50vw",height:"35vw"}},Ne=function(){return{overflow:"scroll"}},qe=function(){return{"960px":"75vw","640px":"100vw"}};let $e=(()=>{class n{constructor(t,i,o,r){this.layoutService=t,this.messageService=i,this.http=o,this.authService=r,this.totalIn=0,this.totalOut=0,this.totalBooktour=0,this.listTransaction=[],this.statisticIn=[],this.statisticOut=[],this.dataStatisticIn=[],this.dataStatisticOut=[],this.listDay=[3,5,7,10,30],this.listDayTransaction=[{name:"1",value:1},{name:"3",value:3},{name:"5",value:5},{name:"10",value:10},{name:"30",value:30},{name:"T\u1ea5t c\u1ea3",value:-1}],this.listStatus=[{name:"Thu",value:"in"},{name:"Chi",value:"out"}],this.transaction={totalMoney:0,createdBy:this.authService.getUsername(),type:"",content:""},this.isShowCreate=!1,this.day=3,this.dayTransaction=-1,this.chartLabel=[],this.webSocketEndPoint=p.N.backendApiUrl+"/ws"}applyFilterGlobal(t,i){this.dt1.filterGlobal(t.target.value,i)}ngOnInit(){this.header=(new E.WM).set(xe.ds.AUTHORIZATION,this.authService.getToken()),this.loadData(),this.connectWebsocketStaff(),this.items=[{label:"Add New",icon:"pi pi-fw pi-plus"},{label:"Remove",icon:"pi pi-fw pi-minus"}]}loadTransaction(){-1==this.dayTransaction?this.http.get(p.N.backendApiUrl+"/api/v1/project/transaction/findAll",{headers:this.header}).subscribe(t=>{0==t.resultCode?this.listTransaction=t.data:this.messageService.add({severity:"error",summary:t.message})},t=>{this.messageService.add({severity:"error",summary:"Error occur"})}):this.http.get(p.N.backendApiUrl+"/api/v1/project/transaction/findAllByTime?day="+this.dayTransaction,{headers:this.header}).subscribe(t=>{0==t.resultCode?this.listTransaction=t.data:this.messageService.add({severity:"error",summary:t.message})},t=>{this.messageService.add({severity:"error",summary:"Error occur"})})}loadData(){this.http.get(p.N.backendApiUrl+"/api/v1/project/booktour/totalOneDay",{headers:this.header}).subscribe(t=>{0==t.resultCode?this.totalBooktour=t.data:this.messageService.add({severity:"error",summary:t.message})},t=>{this.messageService.add({severity:"error",summary:"Error occur"})}),this.http.get(p.N.backendApiUrl+"/api/v1/project/transaction/totalInOneDay",{headers:this.header}).subscribe(t=>{0==t.resultCode?this.totalIn=t.data:this.messageService.add({severity:"error",summary:t.message})},t=>{this.messageService.add({severity:"error",summary:"Error occur"})}),this.http.get(p.N.backendApiUrl+"/api/v1/project/transaction/totalOutOneDay",{headers:this.header}).subscribe(t=>{0==t.resultCode?this.totalOut=t.data:this.messageService.add({severity:"error",summary:t.message})},t=>{this.messageService.add({severity:"error",summary:"Error occur"})}),this.http.get(p.N.backendApiUrl+"/api/v1/project/transaction/findAll",{headers:this.header}).subscribe(t=>{0==t.resultCode?this.listTransaction=t.data:this.messageService.add({severity:"error",summary:t.message})},t=>{this.messageService.add({severity:"error",summary:"Error occur"})}),this.loadStatistic(this.day)}loadStatistic(t){var i=this;return(0,S.Z)(function*(){yield i.http.get(p.N.backendApiUrl+"/api/v1/project/transaction/statisticInByTime?day="+t,{headers:i.header}).toPromise().then(o=>{0==(null==o?void 0:o.resultCode)?(i.dataStatisticIn=o.data,console.log(i.dataStatisticIn)):i.messageService.add({severity:"error",summary:null==o?void 0:o.message})},o=>{i.messageService.add({severity:"error",summary:"Error occur"})}),yield i.http.get(p.N.backendApiUrl+"/api/v1/project/transaction/statisticOutByTime?day="+t,{headers:i.header}).toPromise().then(o=>{0==(null==o?void 0:o.resultCode)?(i.dataStatisticOut=o.data,console.log(i.dataStatisticOut)):i.messageService.add({severity:"error",summary:null==o?void 0:o.message})},o=>{i.messageService.add({severity:"error",summary:"Error occur"})}),i.initChart()})()}initChart(){const t=getComputedStyle(document.documentElement),i=t.getPropertyValue("--text-color"),o=t.getPropertyValue("--text-color-secondary"),r=t.getPropertyValue("--surface-border");this.chartLabel=[],this.statisticIn=[],this.statisticOut=[];for(let l=0;l<this.dataStatisticIn.length;l++)this.chartLabel.push(this.dataStatisticIn[l].day),this.statisticIn.push(this.dataStatisticIn[l].value),this.statisticOut.push(this.dataStatisticOut[l].value);this.chartData={labels:this.chartLabel,datasets:[{label:"Thu",data:this.statisticIn,fill:!1,backgroundColor:t.getPropertyValue("--orange-500"),borderColor:t.getPropertyValue("--orange-500"),tension:.4},{label:"Chi",data:this.statisticOut,fill:!1,backgroundColor:t.getPropertyValue("--green-600"),borderColor:t.getPropertyValue("--green-600"),tension:.4}]},this.chartOptions={plugins:{legend:{labels:{color:i}}},scales:{x:{ticks:{color:o},grid:{color:r,drawBorder:!1}},y:{ticks:{color:o},grid:{color:r,drawBorder:!1}}}}}showCreate(){this.isShowCreate=!0,this.transaction={totalMoney:0,createdBy:this.authService.getUsername(),type:"in",content:""}}create(){var t=this;return(0,S.Z)(function*(){yield t.http.post(p.N.backendApiUrl+"/api/v1/project/transaction/create",t.transaction,{headers:t.header}).toPromise().then(i=>{0==(null==i?void 0:i.resultCode)?(t.messageService.add({severity:"success",summary:"T\u1ea1o giao d\u1ecbch th\xe0nh c\xf4ng"}),t.isShowCreate=!1,t.loadData()):t.messageService.add({severity:"error",summary:null==i?void 0:i.message}),console.log(i)},i=>{t.messageService.add({severity:"error",summary:"Error occur"})})})()}connectWebsocketStaff(){let i=new Ce(this.webSocketEndPoint);this.stompClient=ye.over(i);const o=this;o.stompClient.connect({},function(r){o.stompClient.subscribe("/topic/transaction",function(l){o.loadData()})},this.errorCallBackStaff)}errorCallBackStaff(t){console.log("errorCallBack Staff -> "+t),setTimeout(()=>{this.connectWebsocketStaff()},5e3)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(be.P),e.Y36(g.ez),e.Y36(E.eN),e.Y36(Te.e))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],viewQuery:function(t,i){if(1&t&&e.Gf(Me,5),2&t){let o;e.iGM(o=e.CRH())&&(i.dt1=o.first)}},decls:65,vars:40,consts:[[1,"grid"],[1,"col-12","lg:col-4"],[1,"card","mb-0"],[1,"flex","justify-content-between","mb-3"],[1,"block","text-500","font-medium","mb-3"],[1,"text-900","font-medium","text-xl"],[1,"flex","align-items-center","justify-content-center","bg-blue-100","border-round",3,"ngStyle"],[1,"pi","pi-shopping-cart","text-blue-500","text-xl"],[1,"text-500"],[1,"flex","align-items-center","justify-content-center","bg-orange-100","border-round",3,"ngStyle"],[1,"pi","pi-money-bill","text-orange-500","text-xl"],[1,"flex","align-items-center","justify-content-center","bg-cyan-100","border-round",3,"ngStyle"],[1,"pi","pi-money-bill","text-cyan-500","text-xl"],[1,"col-12","mt-4","card","grid",2,"margin-left","1vw"],[1,"field","col-4"],["for","day"],["id","day","placeholder","Ch\u1ecdn s\u1ed1 ng\xe0y th\u1ed1ng k\xea",1,"ml-2",3,"options","ngModel","ngModelChange","onChange"],[1,"col-11"],["type","line",3,"data","options"],["id","day","placeholder","Ch\u1ecdn s\u1ed1 ng\xe0y giao d\u1ecbch","optionLabel","name","optionValue","value",1,"ml-2",3,"options","ngModel","ngModelChange","onChange"],["styleClass","mb-4",1,"col-12"],["pTemplate","left"],["responsiveLayout","scroll","currentPageReportTemplate","Hi\u1ec3n th\u1ecb {first} \u0111\u1ebfn {last} c\u1ee7a {totalRecords} b\u1ea3n ghi","dataKey","id",1,"col-12",3,"value","globalFilterFields","rows","paginator","rowsPerPageOptions","showCurrentPageReport","rowHover"],["dt1",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["header","Th\xf4ng tin giao d\u1ecbch",1,"p-fluid",3,"visible","maximizable","resizable","contentStyle","responsive","draggable","breakpoints","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],[1,"my-2"],["pButton","","pRipple","","label","T\u1ea1o giao d\u1ecbch","pTooltip","T\u1ea1o m\u1edbi giao d\u1ecbch","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],[1,"flex"],[1,"p-input-icon-left","ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search keyword",3,"input"],["value","Thu","severity","success",4,"ngIf"],["value","Chi","severity","warning",4,"ngIf"],["value","\u0110\xe3 x\xe1c nh\u1eadn","severity","success",4,"ngIf"],["value","Ch\u01b0a x\xe1c nh\u1eadn","severity","warning",4,"ngIf"],["value","Thu","severity","success"],["value","Chi","severity","warning"],["value","\u0110\xe3 x\xe1c nh\u1eadn","severity","success"],["value","Ch\u01b0a x\xe1c nh\u1eadn","severity","warning"],["colspan","4"],[1,"text-center","col-12",2,"font-weight","bold","font-size","large"],[1,"field","col-12","lg:col-6"],["for","name",2,"font-weight","bold"],["id","name","placeholder","Ch\u1ecdn lo\u1ea1i giao d\u1ecbch","optionLabel","name","optionValue","value",3,"options","ngModel","ngModelChange"],["for","code",2,"font-weight","bold"],["id","code","placeholder","T\u1ed5ng ti\u1ec1n thanh to\xe1n",3,"ngModel","ngModelChange"],[1,"field","col-12"],["for","time",2,"font-weight","bold"],["id","code","rows","5","cols","30","pInputTextarea","",3,"ngModel","ngModelChange"],["pButton","","pRipple","","label","T\u1ea1o giao d\u1ecbch","icon","pi pi-plus",1,"p-button-text",3,"click"]],template:function(t,i){1&t&&(e._UZ(0,"p-toast"),e.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div")(6,"span",4),e._uU(7," S\u1ed1 \u0111\u01a1n \u0111\u1eb7t tour trong 24h"),e.qZA(),e.TgZ(8,"div",5),e._uU(9),e.qZA()(),e.TgZ(10,"div",6),e._UZ(11,"i",7),e.qZA()(),e.TgZ(12,"span",8),e._uU(13,"T\xednh t\u1eeb hi\u1ec7n t\u1ea1i"),e.qZA()()(),e.TgZ(14,"div",1)(15,"div",2)(16,"div",3)(17,"div")(18,"span",4),e._uU(19,"T\u1ed5ng thu trong 24h"),e.qZA(),e.TgZ(20,"div",5),e._uU(21),e.qZA()(),e.TgZ(22,"div",9),e._UZ(23,"i",10),e.qZA()(),e.TgZ(24,"span",8),e._uU(25,"T\xednh t\u1eeb hi\u1ec7n t\u1ea1i"),e.qZA()()(),e.TgZ(26,"div",1)(27,"div",2)(28,"div",3)(29,"div")(30,"span",4),e._uU(31,"T\u1ed5ng chi trong 24h"),e.qZA(),e.TgZ(32,"div",5),e._uU(33),e.qZA()(),e.TgZ(34,"div",11),e._UZ(35,"i",12),e.qZA()(),e.TgZ(36,"span",8),e._uU(37,"T\xednh t\u1eeb hi\u1ec7n t\u1ea1i"),e.qZA()()(),e.TgZ(38,"div",13)(39,"div",14)(40,"label",15),e._uU(41,"Ch\u1ecdn s\u1ed1 ng\xe0y"),e.qZA(),e.TgZ(42,"p-dropdown",16),e.NdJ("ngModelChange",function(r){return i.day=r})("onChange",function(){return i.loadStatistic(i.day)}),e.qZA()(),e.TgZ(43,"div",17)(44,"h5"),e._uU(45,"Th\u1ed1ng k\xea thu chi"),e.qZA(),e._UZ(46,"p-chart",18),e.qZA()(),e.TgZ(47,"div",13)(48,"div",14)(49,"label",15),e._uU(50,"Ch\u1ecdn s\u1ed1 ng\xe0y"),e.qZA(),e.TgZ(51,"p-dropdown",19),e.NdJ("ngModelChange",function(r){return i.dayTransaction=r})("onChange",function(){return i.loadTransaction()}),e.qZA()(),e.TgZ(52,"p-toolbar",20),e.YNc(53,Se,2,0,"ng-template",21),e.qZA(),e.TgZ(54,"h5"),e._uU(55,"Danh s\xe1ch giao d\u1ecbch"),e.qZA(),e.TgZ(56,"p-table",22,23),e.YNc(58,Ee,4,0,"ng-template",24),e.YNc(59,Ie,22,0,"ng-template",25),e.YNc(60,Ze,17,12,"ng-template",26),e.YNc(61,we,3,0,"ng-template",27),e.qZA()()(),e.TgZ(62,"p-dialog",28),e.NdJ("visibleChange",function(r){return i.isShowCreate=r}),e.YNc(63,Ue,15,4,"ng-template",29),e.YNc(64,Oe,1,0,"ng-template",30),e.qZA()),2&t&&(e.xp6(9),e.Oqu(i.totalBooktour),e.xp6(1),e.Q6J("ngStyle",e.DdM(30,f)),e.xp6(11),e.hij("",i.totalIn.toLocaleString("en-us",e.DdM(31,_))," \u0111\u1ed3ng"),e.xp6(1),e.Q6J("ngStyle",e.DdM(32,f)),e.xp6(11),e.hij("",i.totalOut.toLocaleString("en-us",e.DdM(33,_))," \u0111\u1ed3ng"),e.xp6(1),e.Q6J("ngStyle",e.DdM(34,f)),e.xp6(8),e.Q6J("options",i.listDay)("ngModel",i.day),e.xp6(4),e.Q6J("data",i.chartData)("options",i.chartOptions),e.xp6(5),e.Q6J("options",i.listDayTransaction)("ngModel",i.dayTransaction),e.xp6(5),e.Q6J("value",i.listTransaction)("globalFilterFields",e.DdM(35,Le))("rows",10)("rows",10)("paginator",!0)("rowsPerPageOptions",e.DdM(36,Fe))("showCurrentPageReport",!0)("rowHover",!0),e.xp6(6),e.Akn(e.DdM(37,Be)),e.Q6J("visible",i.isShowCreate)("maximizable",!0)("resizable",!1)("contentStyle",e.DdM(38,Ne))("responsive",!0)("draggable",!1)("breakpoints",e.DdM(39,qe))("modal",!0))},dependencies:[c.O5,c.PC,u.Fj,u.JJ,u.On,v.C,m.u,x.iA,g.jx,y.Hq,I.FN,k.Lt,D.V,P.o,A.V,Z.o,w.g,U.Rn],encapsulation:2}),n})(),He=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[d.Bz.forChild([{path:"",component:$e}]),d.Bz]}),n})();var Ve=s(97);let Ye=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[c.ez]}),n})(),Ke=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[g.ez],imports:[c.ez,u.u5,v.S,O.$9,x.U$,L.l,ve,y.hJ,He,I.EV,Ye,Ve.$,k.kW,D.W,P.j,A.S,Z.V,w.A,U.L$]}),n})()}}]);